<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Anatomy of an Open Source Python Project: From Idea to World Domination</title>

		<meta name="description" content="The steps to creating the open source python project tessagon">
		<meta name="author" content="Chris Want">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section style='font-size: 0.7em;'>
					<h1>Anatomy of an Open Source Python Project</h1>
					<h3>From Idea to World Domination</h3>
					<p>
						<small><a href="http://cwant.ca">Chris Want</a></small>
					</p>
          <a class="image" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US">
            <img src="assets/cc.png">
          </a>
				</section>

				<section>
					<h2>Roadmap</h2>
          <ul>
  					<li>
              Discuss a hobby project I created
					  </li>
  					<li>
              Explain why I made it open source
					  </li>
  					<li>
              Describe the tools I used to ensure that the project is
              sustainable
					  </li>
  					<li>
              Examine measurements of success
					  </li>
  					<li>
              Reflect on what I would do different next time
					  </li>
          </ul>
				</section>


				<section>
					<h2>The itch ...</h2>
          <p>I wanted to use Blender to make a Klein bottle tiled with hexagons (a la Bathsheba Grossman)</p>
          <div style='height:300px;'>
  					<a href="https://www.shapeways.com/product/LR5J593S8/klein-bottle-opener">
						  <img src="assets/bathsheba_klein.jpg">
					  </a>
          </div>
				</section>

				<section>
					<h2>Nailed it!</h2>
          <div style='height:300px;'>
					  <img src="assets/bad_klein.png">
          </div>
				</section>

				<section>
					<h2>An Idea</h2>
					<p>
						Why not use ... math? (and Python)
					</p>
          <div style='height:300px;'>
					  <img src="assets/square_klein.png">
          </div>
					<p>
						Easy, to do if you don't want hexagons.
					</p>
				</section>

				<section>
					<h2>BUT ... BUT I WANT HEXAGONS!!!</h2>
					<p>
					  Can't find a tool that does this, so I'll have to write my own software to make them.
					</p>
				</section>

				<section>
					<h2>Requirements</h2>
          <p>Produce a 3D, topologically correct (air-tight) mesh, tiled with hexagons</p>
          <ul>
            <li>Input a math formula for the surface (a function in python that has two args u,v that returns a point in 3D space)</li>
            <li>Input u_num, v_num parameters to control the number of hexagons in each direction</li>
            <li>Handle cyclic domains (objects that wrap, like cylinders, torii, Klein bottles, etc.)
          </ul> 
				</section>

				<section>
					<h2>Design</h2>
          <div style='height:300px;'>
					  <img src="assets/tile_tessagon.png">
          </div>
          <p>The code has two classes 'Tile' and 'Tessagon' (generates the tiles)</p>
				</section>

				<section>
					<h2>Proof of Concept</h2>
          <div style='height:300px;'>
					  <img src="assets/good_klein.png">
          </div>
          <p>It works, and I've created something useful -- now what do I do with it?</p>
				</section>

				<section>
					<h2>Why Open Source?</h2>
          <ul>
            <li>It's important to give back</li>
            <li>Makes it easy to install on any future machines I might own</li>
            <li>Reputational credit has more value than the amount of money I would likely make with the script (I've earned $0 at my Shapeways store since creating it over four years ago)</li>
          </ul>
				</section>

				<section>
					<h2>Tessagon on Github</h2>
          <div style='height:400px;'>
					  <img src="assets/github-initial.png">
          </div>
          <p>Initial commit is one python file that has both classes, and a demo blender file.</p>

				</section>

				<section>
					<h2>DONE!</h2>
          <p>Or am I ... ?</p>

				</section>

				<section>
				  <section>
					  <h2>Scope creep</h2>
            <div style='height:300px;'>
					    <img src="assets/scope-creep-meme.png">
            </div>
				  </section>

				  <section>
            <div style='height:300px;'>
					    <img src="assets/tri_tile_tessagon.png">
            </div>

            <p>If I can do this for hexagons, surely I can do this
              for a triangle tiling?</p>
				  </section>

				  <section>
					  <h2>OOP Refactor</h2>
            <p>Parent classes: Tile, Tessagon</p>
            <p>Subclasses:</p>
					  <table>
						  <tbody>
							  <tr>
								  <td>HexTile, HexTessagon</td>
								  <td>TriTile, TriTessagon</td>
							  </tr>
							  <tr>
								  <td>
                    <div style='height:200px;'>
					            <img src="assets/hex_tessagon.png">
                    </div>
                  </td>
								  <td>
                    <div style='height:200px;'>
					            <img src="assets/tri_tessagon.png">
                    </div>
                  </td>
							  </tr>
						  </tbody>
					  </table>
				  </section>

 				  <section>
            <h2>But I can't stop ... </h2>
				  	<p>25-ish subclasses added ...</p>
				  	<table>
				  		<tbody>
				  			<tr>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/dodeca_tessagon.png">
                    </div>
                  </td>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/dissected_triangle_tessagon.png">
                    </div>
                  </td>
				  			</tr>
				  			<tr>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/pythagorean_tessagon.png">
                    </div>
                  </td>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/floret_tessagon.png">
                    </div>
                  </td>
				  			</tr>
				  		</tbody>
				  	</table>
				  </section>

				  <section>
				  	<h2>Color Patterns</h2>
				  	<table>
				  		<tbody>
				  			<tr>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/tri_tessagon_color2.png">
                    </div>
                  </td>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/square_tessagon_color8.png">
                    </div>
                  </td>
				  			</tr>
				  			<tr>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/dissected_square_tessagon_color2.png">
                    </div>
                  </td>
				  				<td>
                    <div style='height:200px;'>
				  	          <img src="assets/floret_tessagon_color3.png">
                    </div>
                  </td>
				  			</tr>
				  		</tbody>
				  	</table>
				  </section>

				  <section>
				  	<h2>Rotation of Tilings</h2>
            <div style='height:300px;'>
				  	  <img src="assets/brick_tessagon.png">
            </div>
				  </section>


          <section>
				  	<h2>Automation of documentation</h2>
            <p>A script that runs in Blender generates screenshots/thumbs/markdown</p>
				  	<table>
				  		<tbody>
				  			<tr>
                  <td style='vertical-align: middle;'>
                    <div style='height:300px;'>
				  	          <img src="assets/documentation_script_code.png">
                    </div>
                  </td>
				  				<td style='vertical-align: middle;'>
                    <div style='height:300px;'>
				  	          <img src="assets/documentation_script.png">
                    </div>
                  </td>
				  			</tr>
				  		</tbody>
				  	</table>
          </section>

          <section>
            <h2>Hexagonal Architecture</h2>
            <p>This is all just math, so why tie it to Blender?</p>
            <p>Shimmed a generic output 'Adaptor' to support Blender, VTK, and Python lists/dict data structures.</p>

            <pre><code data-trim>
               def add_vert(self, index_keys, ratio_u, ratio_v, **kwargs):
                   # Use the mesh adaptor to create a vertex.
                   # In reality, multiple vertices may get defined if symmetry is declared
                   vert = self._get_vert(index_keys)
                   if not vert:
                       coords = self.f(*self.blend(ratio_u, ratio_v))
                       vert = self.mesh_adaptor.create_vert(coords)
                   ...
            </code></pre>
          </section>




          <section>
            <h2>Metadata and Discovery</h2>
            <p>I created a layer so that different tiling
              types can be easily found.</p>
            <p>The immediate goal was to create a nicely-ordered,
              self-generating menu of tilings in Blender.</p>

            <pre><code data-trim style='white-space:pre-wrap'>

               find_all = TessagonDiscovery()
               find_all.to_list() # a list of all of the tessagons

               regular = find_all.with_classification('regular')
               regular.to_list() # The three regular tilings (HexTessagon, SquareTessagon, TriTessagon)

               regular.inverse().to_list() # All tilings except for the regular ones
            </code></pre>
          </section>







				</section>

				<section>
          <div style='height:400px;'>
					  <img src="assets/3d-print.png">
          </div>
          <p>I also started making stuff</p>
				</section>

				<section>
					<h2>Branch structure</h2>
          <p>Pull requests of feature branches merged into `development`
            branch as squashed rebases</p>
          <p>`master` branch for releases only, merging in `development`
            when the time feels right</p>
				</section>

				<section>
				  <section>
					  <h2>Style: PEP8 & Linting</h2>
            <p>
              <a href="https://www.python.org/dev/peps/pep-0008/">
                https://www.python.org/dev/peps/pep-0008/
              </a>
            </p>
            <p>It's bad enough having to read other people's code,
              let alone having to read code that looks like
              it was written by three different guys
            </p>
				  </section>
				  <section>
					  <h2>Linting: Flake8</h2>
            <pre><code data-trim>
              pip3 install flake8
            </code></pre>

            <p><a href="https://stackoverflow.com/questions/8503559/what-is-linting">Stackoverflow</a>: &quot;Linting is the process of running a program
              that will analyse code for potential errors.&quot;</p>
            <p>Flake8 looks for violations of PEP8</p>
				  </section>
				  <section>
            <p>Before ...</p>
            <pre><code data-trim style='white-space:pre-wrap'>
$ flake8 pythagorean_tessagon.py
pythagorean_tessagon.py:22:1: E302 expected 2 blank lines, found 1
pythagorean_tessagon.py:23:3: E111 indentation is not a multiple of four
pythagorean_tessagon.py:25:13: E201 whitespace after '{'
...
            </code></pre>
				  </section>
				  <section>
            <p>... after</p>
            <pre><code data-trim>
$ flake8 pythagorean_tessagon.py
            </code></pre>
            <p>(no output == flake8 isn't angry)</p>
				  </section>
          <section>
					  <p>Can turn off specific tests inline</p>
            <pre><code data-trim>
import os
import sys

this_dir = os.path.dirname(os.path.realpath(__file__))
sys.path.append(this_dir + '/../..')

from tessagon.core.tile import Tile  # noqa: E402
            </code></pre>
            <p>E402 corresponds to:
              <b>module level import not at top of file</b>
            </p>
				  </section>
				  <section>
            <blockquote cite="https://en.wikiquote.org/wiki/Consistency">A foolish consistency is the hobgoblin of little minds ...
            </blockquote>
            <small>Ralph Waldo Emerson</small>
            
				  </section>
				</section>

				<section>
          <section>
					  <h2>Test suite</h2>
            <p>Ensures the software operates correctly</p>
            <p>When done right, become your "license to make changes"</p>
				  </section>
				  <section>
            <p>pytest</p>
            <pre><code data-trim>
              pip3 install pytest
              # Measures test coverage
              pip3 install pytest-cov
            </code></pre>
            <ul>
              <li>Tests go in the `tests` directory</li>
              <li>Class names begin with `Test'</li>
              <li>Methods begin with `test_`</li>
            </ul>
				  </section>


				  <section>
            <p>Only 14 tests (yikes)</p>
            <pre><code data-trim>
class TestAbstractTile(CoreTestsBase):
    def test_u_range_v_range_params(self):
        tessagon = FakeTessagon()
        tile = AbstractTile(tessagon, u_range=[0.5, 1.0],
                                      v_range=[2.5, 4.0])
        assert (tile.corners == [[0.5, 2.5],
                                 [1, 2.5],
                                 [0.5, 4.0],
                                 [1.0, 4.0]])
            </code></pre>
				  </section>


				  <section>
            <p>Coverage</p>
            <pre><code data-trim>
$ pytest --cov=tessagon tests/
[SNIP]
Name                                  Stmts   Miss  Cover
---------------------------------------------------------
tessagon/__init__.py                      0      0   100%
tessagon/adaptors/__init__.py             0      0   100%
tessagon/adaptors/blender_adaptor.py     18     18     0%
tessagon/adaptors/vtk_adaptor.py         39     39     0%
[SNIP]
tessagon/types/zig_zag_tessagon.py       55     55     0%
---------------------------------------------------------
TOTAL                                  1837   1601    13%
            </code></pre>
            <p>(... more yikes)</p>
				  </section>
				</section>


				<section>
  				<section>
  					<h2>Continuous Integration</h2>
            <p>Ensure that code coming into the project is
              able to merge and passes project standards</p>
            <p>For tessagon, we run the test suite and the linting</p>
  				</section>
  				<section>
  					<h2>Travis CI</h2>
            <p>
              <a href="https://travis-ci.org/">https://travis-ci.org/</a>
            </p>
            <ul>
              <li>Free account</li>
              <li>Integrates with Github</li>
            </ul>
  				</section>
  				<section>
  					<h2>Github project setup</h2>
            <div style='height:300px;'>
				  	  <img src="assets/travis_tessagon_setup.png">
            </div>
  				</section>
  				<section>
            <p>.travis.yml</p>
            <pre><code data-trim>
              os: linux
              sudo: false
              language: python

              matrix:
                include:
                  - python: 3.6
                  - python: 3.5
              install:
                - pip install flake8
              script:
                - pytest
                - flake8 --verbose
            </code></pre>
  				</section>
  				<section>
  					<p>Pull request</p>
            <div style='height:500px;'>
				  	  <img src="assets/travis_tessagon_pr.png">
            </div>
  				</section>
  				<section>
            <div style='height:500px;'>
				  	  <img src="assets/travis_tessagon_pr_pass.png">
            </div>
  				</section>
  				<section>
  					<p>Builds</p>
            <div style='height:500px;'>
				  	  <img src="assets/travis_tessagon_builds.png">
            </div>
  				</section>
				</section>

				<section>
				  <section>
					  <h2>Packaging & Distribution</h2>
            <a href="https://packaging.python.org/tutorials/distributing-packages/">https://packaging.python.org/tutorials/distributing-packages/</a>
				  </section>

				  <section>
					  <h2>Re-structuring</h2>
            <pre><code data-trim>
.                         .                  
├── adaptors              ├── demo           
├── core                  ├── documentation  
├── demo                  │   └── images     
├── documentation   ==>   ├── tessagon       
│   └── images            │   ├── adaptors   
├── misc                  │   ├── core       
└── tests                 │   ├── misc       
    └── core              │   └── types        
                          └── tests          
                              └── core
            </code></pre>            
				  </section>

				  <section>
					  <p>setup.py</p>
            <pre><code data-trim>
              from setuptools import setup, find_packages

              # See next slide for long_description

              setup(
                  name='tessagon',
                  version='0.4.2',
                  description='Tessellate your favorite 2D manifolds with triangles, ' +
                  'hexagons, and other interesting patterns.',
                  long_description=long_description,
                  url='https://github.com/cwant/tessagon',
                  author='Chris Want',
                  classifiers=['Development Status :: 3 - Alpha',
                               'Intended Audience :: Developers',
                               'Intended Audience :: Manufacturing',
                               'Intended Audience :: Science/Research',
                               'License :: OSI Approved :: Apache Software License',
                               'Natural Language :: English',
                               'Programming Language :: Python :: 3 :: Only',
                               'Topic :: Artistic Software',
                               'Topic :: Multimedia :: Graphics :: 3D Modeling',
                               'Topic :: Scientific/Engineering :: Mathematics',
                               'Topic :: Scientific/Engineering :: Visualization'],
                  keywords='tesselation tiling modeling blender vtk',
                  packages=find_packages(exclude=['tests', 'demo', 'wire_skin.py']),
                  python_requires='~=3.5'
              )
                            
            </code></pre>            
				  </section>

				  <section>
					  <p>Note: documentation is in ReStructedText (RST), not Markdown</p>
            <pre><code data-trim>
              long_description = '''
              ===========================================
              tessagon: tessellation / tiling with python
              ===========================================

              Tessellate your favorite 3D surfaces (technically, 2D manifolds) with
              triangles, hexagons, or a number of other curated tiling types!

              Please visit the Github repository for documentation:

              `<https://github.com/cwant/tessagon>`_

              Either checkout the code from the Github project, or install via pip::

                  python3 -m pip install tessagon

              or::

                  pip3 install tessagon

              '''[1:-1]
            </code></pre>            
				  </section>

				  <section>
					  <h3>Build packages</h3>
            <p>Source distribution</p>
            <pre><code data-trim>
              python setup.py sdist
            </code></pre>
            <p>Universal wheel (build package):</p>
            <pre><code data-trim>
               python setup.py bdist_wheel --universal</li>
            </code></pre>
				  </section>
				  <section>
            <pre><code data-trim>
              $ ls dist/
              tessagon-0.4.2-py3-none-any.whl  tessagon-0.4.2.tar.gz
            </code></pre>
				  </section>
				  <section>
					  <h3>Uploading to PYPI</h3>
            <p>We want to host the package on the "Python Package Index"
              repository</p>
            <p>Get an account on both regular and test site</p>
            <p><a href="https://pypi.org">https://pypi.org</a></p>
            <p><a href="https://test.pypi.org">https://test.pypi.org</a></p>
            <p>Twine uploads the project to PYPI</p>
            <pre><code data-trim>
               pip3 install twine
            </code></pre>
				  </section>
				  <section>
            <p>~/.pypirc</p>
            <pre><code data-trim>
                [distutils]
                index-servers=
                    pypi
                    testpypi

                [pypi]
                username = cwant

                [testpypi]
                repository = https://test.pypi.org/legacy/
                username = cwant
            </code></pre>
				  </section>
				  <section>
					  <h3>twine</h3>
            <p>Upload to test pypi ...</p>
            <pre><code data-trim>
                twine upload --repository testpypi dist/*
            </code></pre>
            <p>(Password required)</p>
				  </section>

				  <section>
					  <h3>twine</h3>
            <p>... or to real pypi</p>
            <pre><code data-trim>
                twine upload dist/*
            </code></pre>
            <p>(Password required)</p>
				  </section>

				  <section>
					  <p><a href="https://pypi.org/project/tessagon">
              https://pypi.org/project/tessagon
            </a></p>
            <div style='height:300px;'>
	  				  <img src="assets/pypi-tessagon.png">
            </div>
            <pre><code data-trim>
               pip3 install tessagon
            </code></pre>
				  </section>
				</section>

				<section>
  				<section>
	  				<h2>How do we measure world domination?</h2>
            <div style='height:300px;'>
					    <img src="assets/fancy-cats-fancy-a-game.jpg">
            </div>

		  		</section>
  				<section>
	  				<h3>Stars and Forks</h3>
            <div>
				  	  <img src="assets/stars_forks.png">
            </div>
            <p>Stars from:</p>
            <ul>
              <li>Canada</li>
              <li>US (Microsoft Research)</li>
              <li>Italy</li>
              <li>Germany</li>
              <li>New Zealand</li>
              <li>Australia</li>
            </ul>
		  		</section>
  				<section>
	  				<h3>SEO</h3>
            <p>Number one hit searching for "tessagon" on Google (beating out somebody named Tessa Gon).</p>
            <p>Four of the page one hits are about this project, most of the top image hits are about this project</p>
            <p>Terms like "python tiling", "python tessellation" fair pretty poorly</p>
            <p>Number three hit for "python 3d tiling"</p>
		  		</section>
  				<section>
            <div>
					    <img src="assets/one-contributor.png">
            </div>

            <p>Only one developer still, so not really dominating on that front</p>
		  		</section>
  				<section>
            <h3>Conclusion</h3>
            <div style='height:300px;'>
					    <img src="assets/success-kid.jpg">
            </div>
            <p>By carefully paying attention only to the statistics I like (and ignoring the ones I don't) I can totally say I achieved world domination</p>
		  		</section>
				</section>

				<section>
          <section>
					  <h2>Lessons Learned</h2>
          </section>
          <section>
					  <h3>Should have started the test suite and following PEP8 earlier</h3>
            <div style='height:300px;'>
	  				  <img src="assets/test-lint-pr.png">
            </div>
          </section>
          <section>
            <h3>Should have been following proper packaging structure earlier</h3>
          </section>
          <section>
            <h3>More care could have been taken earlier to reduce churn on binary files</h3>
          </section>
				</section>

        <section>
					<h2>Thanks for listening!</h2>
          <p>Questions?</p>
<dl>
<dt>This presentation</dt>
<dd>
<a href="https://cwant.github.io/python-os-presentation">
  <small>https://cwant.github.io/python-os-presentation</small>
</a>
</dd>
<dt>Slides source</dt>
<dd>
<a href="https://github.com/cwant/python-os-presentation">
  <small>https://github.com/cwant/python-os-presentation</small>
</a>
</dd>
<dt>Tessagon</dt>
<dd>
<a href="https://github.com/cwant/tessagon">
  <small>https://github.com/cwant/tessagon</small>
</a><br />
<a href="https://pypi.org/project/tessagon">
  <small>https://pypi.org/project/tessagon</small>
</dd>
</dl>

        </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
        // I hate up/down/left/right, just use next/prev
        keyboard: {
          37: 'prev',
          38: 'prev',
          39: 'next',
          40: 'next',

          72: 'prev',
          74: 'next',
          75: 'prev',
          76: 'next'
        },
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

		<style>
			/* Social sharing */
			.share-reveal a {
				display: inline-block;
				height: 34px;
				line-height: 32px;
				padding: 0 10px;
				color: #fff;
				font-family: Helvetica, sans-serif;
				text-decoration: none;
				font-weight: bold;
				font-size: 12px;
				vertical-align: top;
				text-transform: uppercase;
				box-sizing: border-box;
			}

			.share-reveal .share-reveal-editor {
				line-height: 30px;
			}

			.share-reveal svg {
				vertical-align: middle;
			}

			.share-reveal a + a {
				margin-left: 10px;
			}

			.share-reveal-editor {
				border: 2px solid #fff;
			}

			.share-reveal-twitter,
			.share-reveal-follow {
				background-color: #00aced;
			}

			.share-reveal-facebook {
				background-color: #4B71B8;
			}

			/* Advertising */
			#carbonads {
				width: 370px;
				min-height: 100px;
				font-size: 18px;
				border: 1px solid rgba(255, 255, 255, 0.2);
				padding: 10px;
				margin: 40px auto 0 auto;
				font-size: 16px;
				z-index: 10;
				text-align: left;
			}

			#carbonads .carbon-img img {
				float: left;
				margin: 0 10px 0 0;
				border: 0;
				box-shadow: none;
			}

			#carbonads .carbon-poweredby {
				display: block;
				margin-top: 10px;
				color: #aaa;
			}
		</style>

		<script>
		var _gaq = [['_setAccount', 'UA-15240703-1'], ['_trackPageview']];
		(function(d, t) {
		var g = d.createElement(t),
			s = d.getElementsByTagName(t)[0];
		g.async = true;
		g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g, s);
		})(document, 'script');
		</script>

		<script>
			[].slice.call( document.querySelectorAll( '.share-reveal-facebook, .share-reveal-twitter' ) ).forEach( function( element ) {
				element.addEventListener( 'click', function( event ) {
					event.preventDefault();
					var width = 500, height = 300;
					var winTop = window.screenY + (window.screen.height / 2) - (height / 2);
					var winLeft = window.screenX + (window.screen.width / 2) - (width / 2);
					window.open(this.href, 'shre', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width=' + width + ',height=' + height);
				} );
			} );

			if( !navigator.userAgent.match( /(iphone|android)/gi ) && !!document.querySelector ) {
				document.querySelector( '.share-reveal' ).style.display = 'block';
				document.querySelector( '.fork-reveal' ).style.display = 'block';
			}
		</script>

	</body>
</html>
